var Events=function(){"use strict";var n,t={},e=function(n){var e;for(e in t)if(t[e]===n)return!0;return!1},c=function(c){var i,o=function(n,t){return(void 0===i[n]||t)&&(i[n]={callbacks:[],silenced:!1,locked:!1}),i[n]},r=!1,a=!1;return i={},"string"==typeof c?(t[c]={},c=t[c]):c="object"==typeof c?c:this||{},c.on=function(n,t,e,c){r||i[n]&&i[n].locked||o(n).callbacks.push({f:t,context:e,silenced:!1,async:c===!1?-1:0|c})},c.attach=c.on,c.off=function(n,t){for(var e=i[n]&&i[n].callbacks||[],c=void 0===t?0:e.length-1;c>=0;c-=1)t===(e[c]&&e[c].f)&&e.splice(c,1)},c.detach=c.off,n=function(n,t,e){var o,r,f,l,s;if(!(a||i[n]&&i[n].silenced))for(f=i[n]&&i[n].callbacks||[],l=f.length,s=0,e=e===!1?-1:0|e;l>s;s+=1)r=f[s],r.silenced||(o=r.async+e,0===r.async&&0===e||o>0||1===e?setTimeout(function(){this.func.apply(this.context,this.data.concat([this]))}.bind({func:r.f,context:r.context,name:n,bus:c,async:!0,data:t}),0):(0>o||-1===e)&&f[s].f.apply(f[s].context,t.concat([{func:r.f,context:r.context,name:n,bus:c,async:!1,data:t}])))},c.emit=function(t){return n(t,Array.prototype.slice.call(arguments,1))},c.emitSync=function(t){return n(t,Array.prototype.slice.call(arguments,1),!1)},c.emitAsync=function(t){return n(t,Array.prototype.slice.call(arguments,1),!0)},c.fire=c.trigger=c.emit,c.fireSync=c.triggerSync=c.emitSync,c.fireAsync=c.triggerAsync=c.emitAsync,c.silence=function(n,t){var r,f,l;if(e(c))return!1;if(void 0===n)return void(a=!0);if(void 0===t)return void(o(n).silenced=!0);if(r=i[n],void 0!==r)for(l=r.callbacks.length,f=0;l>f;f+=1)r.callbacks[f].f===t&&(r.callbacks[f].silenced=!0)},c.unsilence=function(n,t){var r,f,l;if(e(c))return!1;if(void 0===n&&(a=!1),void 0===t&&(o(n).silenced=!1),r=i[n],void 0!==r)for(l=r.callbacks.length,f=0;l>f;f+=1)r.callbacks[f].f===t&&(r.callbacks[f].silenced=!1)},c.lock=function(n){e(c)||(void 0===n?r=!0:o(n).locked=!0)},c.unlock=function(n){e(c)||(void 0===n?r=!1:o(n).locked=!1)},c.reset=function(n){e(c)||null!==i&&(void 0===n?i={}:o(n,!0))},c};return c.get=function(n){return t[n]},c}();!function(n,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():n.returnExports=t()}(this,function(){return Events});