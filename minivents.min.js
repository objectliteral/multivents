var Events=function(){"use strict";var n={},e=function(e){var c;for(c in n)if(n[c]===e)return!0;return!1},c=function(c){var t,i=function(n,e){return(void 0===t[n]||e)&&(t[n]={callbacks:[],silenced:!1,locked:!1}),t[n]},o=!1,l=!1;return t={},"string"==typeof c?(n[c]={},c=n[c]):c="object"==typeof c?c:this||{},c.on=function(n,e,c,l){o||t[n]&&t[n].locked||i(n).callbacks.push({f:e,context:c,silenced:!1,async:l===!1?-1:0|l})},c.off=function(n,e){for(var c=t[n]&&t[n].callbacks||[],i=void 0===e?0:c.length-1;i>=0;i-=1)e===(c[i]&&c[i].f)&&c.splice(i,1)},c.emit=function(n,e,i){var o,f,a,r,s;if(!(l||t[n]&&t[n].silenced))for(a=t[n]&&t[n].callbacks||[],r=a.length,s=0,i=i===!1?-1:0|i;r>s;s+=1)f=a[s],f.silenced||(o=f.async+i,0===f.async&&0===i||o>0||1===f.async?setTimeout(a[s].f.bind(a[s].context,{name:n,bus:c,async:!0,data:e}),0):(0>o||-1===f.async)&&a[s].f.apply(a[s].context,{name:n,bus:c,async:!1,data:e}))},c.silence=function(n,o){var f,a,r;if(e(c))return!1;if(void 0===n)return void(l=!0);if(void 0===o)return void(i(n).silenced=!0);if(f=t[n],void 0!==f)for(r=f.callbacks.length,a=0;r>a;a+=1)f.callbacks[a].f===o&&(f.callbacks[a].silenced=!0)},c.unsilence=function(n,o){var f,a,r;if(e(c))return!1;if(void 0===n&&(l=!1),void 0===o&&(i(n).silenced=!1),f=t[n],void 0!==f)for(r=f.callbacks.length,a=0;r>a;a+=1)f.callbacks[a].f===o&&(f.callbacks[a].silenced=!1)},c.lock=function(n){e(c)||(void 0===n?o=!0:i(n).locked=!0)},c.unlock=function(n){e(c)||(void 0===n?o=!1:i(n).locked=!1)},c.reset=function(n){e(c)||null!==t&&(void 0===n?t={}:i(n,!0))},c};return c.get=function(e){return n[e]},c}();!function(n,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():n.returnExports=e()}(this,function(){return Events});